<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Locomotive Scroll css i-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.css">
    <title>Document</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@700&display=swap');

        html, body {
        margin: 0;  
        }

        body {
            font-family:sans-serif;
            color:#333;
            background:#efefef;
            font-size:3vw;
        }

        svg {
            width:50%;
        }

        .clockWrapper {
            background:#fff;
            display:flex;
            justify-content:center;
            background:#323232;
            height:60vw;
        }

        .flexContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        .dark {
            background:#263238;
        }

        h1 {
            font-family: 'Barlow Semi Condensed', sans-serif;
        }

        .dark h1 {
            color:#ccc;
        }

        .content {
            padding:3vw;
            line-height:1.8;
        }
    </style>
</head>
<body>
    <div class="scrollContainer">
        <div class="content">
            <h1>Smooth Scrolling: Yes</h1>
             <p>arcu, non mattis nunc. Pellentesque quis enim eget ex congue ornare quis eu dolor. Sed ac egestas dissim velit mi, at semper risussellus consequat libero sed auctor pulvinar. Du</p>
             <p>or sit amet. Nulla facilisi. Integer id placerat massa. Duis justo arcu, luctus sit amet pharetra a, pretium id ligula. Donec efficitur nunc vitae eros hendrerit feugiat. Phasellus consequat libero sed auctor pulvinar. Duis cursus libero at justo aliquet accumsan. Class aptent taciti sociosqu adauris, sagittis sagittis justo. Nam et semper felis, et malesuada erat.</p>
             <p>Donec et ultricies arcu, non mattis nunc. Pellentesque quis enim eget ex congue ornare quis eu dolor. Sed ac egestas dolor, vitae placerat elit. Ut luctus massa sit amet etra cumsan. Class aptent taciti sociosqu adauris, sagittis sagittis justo. Nam et semper feli quam facilisis congue. Donec mauris dolor, congue ac euismod eu, fs sagittis justo. Nam et semper felis, et malesuada erat.</p>
              <p>arcu, non mattis nunc. Pellentesque quis enim eget ex congue ornare quis eu dolor. Sed ac egestas dissim velit mi, at semper risussellus consequat libero sed auctor pulvinar. Du</p>
             <p>or sit amet. Nulla facilisi. Integer id placerat massa. Duis justo arcu, luctus sit amet pharetra cumsan. Class aptent taciti sociosqu adauris, sagittis sagittis justo. Nam et semper felis, et malesuada erat.</p>
             <p>ongue ornare quis eu dolor. Sed ac egestas dolor, vitae placerat elit. Ut luctus massa sit amet quam facilisis congue. Donec mauris dolor, congue ac euismod eu, fs sagittis justo. Nam et semper felis, et malesuada erat.</p>
        </div> 
        
        <div class="clockWrapper">
        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400">
          <defs>
            <style>
              .cls-1 {
                fill: #323232;
              }
        
              .cls-2 {
                fill: none;
                stroke: #f6c;
                stroke-linejoin: round;
                stroke-width: 8px;
              }
        
              .cls-3 {
                fill: #a4a4a4;
              }
        
              .cls-4 {
                fill: #ccc;
              }
            </style>
          </defs>
          <g id="bg">
            <g id="Layer3_0_FILL" data-name="Layer3 0 FILL">
              <path class="cls-1" d="M400,400V0H0V400Z"/>
            </g>
          </g>
          <g id="face">
            <g id="Layer2_0_FILL" data-name="Layer2 0 FILL">
              <path d="M200,181.5a18.5,18.5,0,0,0,0,37,18.5,18.5,0,0,0,0-37Z"/>
            </g>
            <path id="Layer2_0_1_STROKES" data-name="Layer2 0 1 STROKES" class="cls-2" d="M388.5,200q0,78.11-55.2,133.3T200,388.5q-78.1,0-133.3-55.2T11.5,200q0-78.1,55.2-133.3T200,11.5q78.11,0,133.3,55.2T388.5,200Z"/>
          </g>
          <g id="smallHand">
            <g id="smallHand_0_Layer0_0_FILL" data-name="smallHand 0 Layer0 0 FILL">
              <path class="cls-3" d="M195,69V200h10V69l-5-10.25Z"/>
            </g>
          </g>
          <g id="bigHand">
            <g id="bigHand_0_Layer0_0_FILL" data-name="bigHand 0 Layer0 0 FILL">
              <path class="cls-4" d="M195,44V200h10V44l-5-10.25Z"/>
            </g>
          </g>
        </svg>
        
            </div>
         <div class="content">
            <h1>more text</h1>
             <p>arcu, non mattis nunc. Pellentesque quis enim eget ex congue ornare quis eu dolor. Sed ac egestas dissim velit mi, at semper risussellus consequat libero sed auctor pulvinar. Du</p>
             <p>or sit amet. Nulla facilisi. Integer id placerat massa. Duis justo arcu, luctus sit amet pharetra a, pretium id ligula. Donec efficitur nunc vitae eros hendrerit feugiat. Phasellus consequat libero sed auctor pulvinar. Duis cursus libero at justo aliquet accumsan. Class aptent taciti sociosqu adauris, sagittis sagittis justo. Nam et semper felis, et malesuada erat.</p>
             <p>Donec et ultricies arcu, non mattis nunc. Pellentesque quis enim eget ex congue ornare quis eu dolor. Sed ac egestas dolor, vitae placerat elit. Ut luctus massa sit amet etra cumsan. Class aptent taciti sociosqu adauris, sagittis sagittis justo. Nam et semper feli quam facilisis congue. Donec mauris dolor, congue ac euismod eu, fs sagittis justo. Nam et semper felis, et malesuada erat.</p>
              <p>arcu, non mattis nunc. Pellentesque quis enim eget ex congue ornare quis eu dolor. Sed ac egestas dissim velit mi, at semper risussellus consequat libero sed auctor pulvinar. Du</p>
             <p>or sit amet. Nulla facilisi. Integer id placerat massa. Duis justo arcu, luctus sit amet pharetra cumsan. Class aptent taciti sociosqu adauris, sagittis sagittis justo. Nam et semper felis, et malesuada erat.</p>
             <p>ongue ornare quis eu dolor. Sed ac egestas dolor, vitae placerat elit. Ut luctus massa sit amet quam facilisis congue. Donec mauris dolor, congue ac euismod eu, fs sagittis justo. Nam et semper felis, et malesuada erat.</p>
        </div> 
    </div>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script><!--Locomotive Scroll Kütüphanesi-->
    <script>
        //1-
        //Bu dersye sayfamızı locomotive scroll kütüphanesi ile smooth scroll nasıl yaparız ve bu işlemden sonra ScrollTrigger ı bu 
        //Bu kütüphane ile nasıl kullanırız onu öğreneceğiz.

        //Öncelikle smooth scroll yapabilmek için locomotive-scroll kütüphanesini ve bu kütüphanenin css ini projemize import ettik.
        //css i import etmezsek düzgün çalışmayacaktır. 

        //2-
        //Locomotive Scroll u kullanabilmek için aşağıdaki gibi kullanacağımız elementi belirtip smooth:true dedik.Böylece locomotive
        //scroll kütüphanesi ile sayfamıza smooth scroll eklemiş olduk.Kütüphanenin birçok özelliği vardır ayrıca bu kütüphanenin
        //dökümanına bakmak faydalı olacaktır.
        const locoScroll = new LocomotiveScroll({
            el: document.querySelector(".scrollContainer"),
            smooth:true
        })
        //7-
        //-------------------------------------------------------------
        // Locomotive Scroll her güncellendiğinde ScrollTrigger'a da güncelleme yapmasını söyledik (sync positioning)
        locoScroll.on("scroll", ScrollTrigger.update);

        // Locomotive Scroll bazı şeyleri ele geçirdiği için ScrollTrigger'a ".smooth-scroll" öğesi için bu proxy 
        //yöntemlerini kullanmasını söyleyin
        ScrollTrigger.scrollerProxy(".scrollContainer", {
            scrollTop(value) {
                    return arguments.length ? locoScroll.scrollTo(value, 0, 0) : locoScroll.scroll.instance.scroll.y;
            }, // bir scrollLeft tanımlamamız gerekmiyor çünkü yalnızca dikey olarak kaydırıyoruz.

        getBoundingClientRect() {
            return {top: 0, left: 0, width: window.innerWidth, height: window.innerHeight};
        },
        // LocomotiveScroll, mobil cihazlarda işleri tamamen farklı bir şekilde ele alır; containerı hiç transform etmez bile! 
        //Bu nedenle, doğru davranışı elde etmek ve jitterları önlemek için, mobil cihazda bazı şeyleri position:fixed ile sabitlememiz gerekir. 
        //Container a (LocomotiveScroll kontrollü öğe) uygulanan bir dönüşüm olup olmadığını kontrol ederek bunu hissederiz.
        pinType: document.querySelector(".scrollContainer").style.transform ? "transform" : "fixed"
        });
        //-------------------------------------------------------------
        
        //3-
        //Locomotive Scrollun kurulumunu yaptıktan sonra devtoolsta sayfamızı incelersek html ve bodye overflow:hidden css i uygulandığını,
        //c-scrollbar classına sahip scrollbar elementinin eklendiğini ve hedef elementin matrix3d özeeliği aldığını görürüz.
        //scroll yaptıkça elementimiziz matrix3d değerleri değişir.Buradan şunu anlayabiliriz locomotive scrollun scroll işlevi
        //tarayıcının varsayılan scrollu gibi işlemiyor.

        //4-
        //SVG Elementimizin animasyonunu aşağıdaki gibi oluşturduk.
        gsap.set("#bigHand, #smallHand", {svgOrigin:"200 200"})//svgOrigin in işlevi transformOrigin in aynısıdır

        let tl = gsap.timeline({defaults:{ease:"none"}})
            .to("#bigHand", {rotation:360, duration:3})
            .to("#smallHand", {rotation:30, duration:3}, 0)

        //5-
        //Animasyonu oluşturduktan sonra elementimize göründüğünde animasyonun oynatılması için aşağıdaki gibi ScrollTrigger ekliyoruz.
        ScrollTrigger.create({
            trigger:".clockWrapper",
            start:"50% 50%",
            end:"+=300",
            animation:tl,
            scroller:".scrollContainer",//Varsayılan scroll penceresini tanımladık bunu yazmazsak scrollTrigger yine çalışmaz
            scrub:true,
            pin:true
        })
        //6-
        //Herşeyi doğru yaptık fakat ScrollTriggerı çalışmıyor :(.
        //Unutmayalım ScrollTrigger tüm mantığını ve işleyşini sayfanın scrolllTop veya scrollLeft üzerinden yönetir.
        //Locomotive Scroll gibi smooth scroll kütüphaneleri ise scroller elementimizin transform değerlerini değiştirir.
        //İşte bu yüzden ScrollTriggerımız çalışmadı.

        //İşte bu sorunu çözmek ve ScrollTrigger ile LocomotiveScroll Kütüphanelerinin birbirleriyle uyumlu çalışlabilmesi için
        //GSAP Özelliği olan scrollTrigger.scrollProxy() kullanacağız.Aynı zamanda bu özelliğin dökümanıda okunması önemlidir. 
        //Kurulumu ---- ----- arası belirtilen yerde yapacağız.Locomotive Scroll kurulumunun ile animasyonlarımızın arasındaki alana 
        //scrollProxy() kurulumunu yapıyoruz

        //7-
        //--------------------------------------------------------
        // window her güncellendiğinde ScrollTrigger'ı yenilemeli ve ardından LocomotiveScroll'u güncellemeliyiz.
        ScrollTrigger.addEventListener("refresh", () => locoScroll.update());

        // her şey ayarlandıktan sonra, refresh() ScrollTrigger'ı kullanın ve LocomotiveScroll'u güncelleyin çünkü pinning vb. için padding eklenmiş olabilir.
        ScrollTrigger.refresh();

        //watch the free video on how this demo was made
        // https://www.snorkl.tv/scrolltrigger-smooth-scroll/
        //---------------------------------------------------------
        //scrollerProxy() - https://gsap.com/docs/v3/Plugins/ScrollTrigger/static.scrollerProxy()/
        //GSAP Locomotive Scroll Demo - https://codepen.io/GreenSock/pen/zYrELYe
        //Scroll Jacking - https://blog.hubspot.com/marketing/scrolljacking-the-good-the-bad-the-ugly
    </script>
</body>
</html>